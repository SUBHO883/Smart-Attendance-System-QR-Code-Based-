<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Student Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .hero-pattern {
      background-image: radial-gradient(circle at center, #4f46e5 0%, #312e81 100%);
    }
    .qr-code-container {
      transition: all 0.3s ease;
    }
    .fade-in {
      animation: fadeIn 0.5s;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .card-hover:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
                  0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    /* Fixed logout button top-right */
    #logoutBtn {
      position: fixed;
      top: 1rem;
      right: 1rem;
      z-index: 1000;
    }
  </style>
</head>
<body class="min-h-screen bg-gray-100">
  <div class="hero-pattern text-white">
    <div class="max-w-7xl mx-auto px-4 py-16 sm:px-6 lg:px-8 flex justify-center">
      <h1 class="text-4xl font-extrabold tracking-tight sm:text-5xl lg:text-6xl">
        Welcome Student ðŸŽ“
      </h1>
    </div>
  </div>

  <button
    id="logoutBtn"
    class="bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"
  >
    Logout
  </button>

  <div class="max-w-7xl mx-auto px-4 py-12 sm:px-6 lg:px-8">
    <div
      id="qrSection"
      class="text-center qr-code-container fade-in max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden p-6 card-hover transition-all duration-300"
    >
      <h2 class="text-2xl font-bold mb-4 text-gray-800">Your Attendance QR Code</h2>
      <p class="mb-4 text-gray-600">This code is valid for <span id="countdown">60</span> seconds</p>
      <div
        id="qrCode"
        class="mx-auto w-48 h-48 mb-4 p-4 border border-gray-200 rounded-lg cursor-pointer"
        title="Click to simulate scan"
      ></div>
      <p class="text-sm text-gray-500 mb-2">Scan with attendance system to register</p>
      <button
        id="generateNewBtn"
        class="mt-4 bg-indigo-100 text-indigo-700 py-2 px-4 rounded-md hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
      >
        Generate New Code
      </button>
    </div>
  </div>

  <script>
    // Simulated current user (replace with real login logic)
    let currentUser = { id: "S001", name: "John Doe" };

    // Attendance records stored in localStorage
    let attendanceRecords = JSON.parse(localStorage.getItem("attendanceRecords")) || [];

    // DOM elements
    const qrSection = document.getElementById("qrSection");
    const qrCode = document.getElementById("qrCode");
    const generateNewBtn = document.getElementById("generateNewBtn");
    const logoutBtn = document.getElementById("logoutBtn");
    const countdownEl = document.getElementById("countdown");

    let countdownTimer = null;
    let countdownValue = 60;

    // Generate and display QR code
    function showQRCode() {
      const qr = qrcode(0, "L");

      // Success page URL
      const attendUrl = "http://127.0.0.1:3000/frontend/success.html";  

      // Unique random code
      const randomCode =
        Math.random().toString(36).substring(2, 15) +
        Math.random().toString(36).substring(2, 15);

      // Final QR data
      const qrData = `${attendUrl}?userId=${currentUser.id}&name=${encodeURIComponent(
        currentUser.name
      )}&code=${randomCode}&time=${Date.now()}`;

      qr.addData(qrData);
      qr.make();

      qrCode.innerHTML = qr.createImgTag(6);
      qrCode.querySelector("img").classList.add("mx-auto");
      qrSection.style.display = "block";

      // Reset countdown
      countdownValue = 60;
      countdownEl.textContent = countdownValue;

      if (countdownTimer) clearInterval(countdownTimer);
      countdownTimer = setInterval(() => {
        countdownValue--;
        countdownEl.textContent = countdownValue;
        if (countdownValue <= 0) {
          clearInterval(countdownTimer);
          alert("QR code expired. Generating a new one.");
          showQRCode();
        }
      }, 1000);
    }

    // Simulate scanning QR code by clicking it
    qrCode.addEventListener("click", () => {
      const now = Date.now();
      attendanceRecords.push({
        userId: currentUser.id,
        name: currentUser.name,
        timestamp: now,
      });
      localStorage.setItem("attendanceRecords", JSON.stringify(attendanceRecords));
      alert("Your attendance recorded successfully âœ…");
    });

    // Logout function
    logoutBtn.addEventListener("click", () => {
      currentUser = null;
      alert("You have been logged out.");
      window.location.href = 'index.html';  // change if needed
    });

    // Generate new QR code on button click
    generateNewBtn.addEventListener("click", showQRCode);

    // Initialize dashboard
    function init() {
      if (!currentUser) {
        alert("Please login first.");
        return;
      }
      showQRCode();
    }

    init();
  </script>
</body>
</html> -->



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Student Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .hero-pattern {
      background-image: radial-gradient(circle at center, #4f46e5 0%, #312e81 100%);
    }
    .card-hover:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
                  0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
  </style>
</head>
<body class="min-h-screen bg-gray-100">
  <div class="hero-pattern text-white">
    <div class="max-w-7xl mx-auto px-4 py-16 sm:px-6 lg:px-8 flex justify-center">
      <h1 class="text-4xl font-extrabold tracking-tight sm:text-5xl lg:text-6xl">
        Welcome Student ðŸŽ“
      </h1>
    </div>
  </div>

  <!-- QR Code Section -->
  <div class="max-w-7xl mx-auto px-4 py-12 sm:px-6 lg:px-8">
    <div
      id="qrSection"
      class="text-center max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden p-6 card-hover transition-all duration-300"
    >
      <h2 class="text-2xl font-bold mb-4 text-gray-800">Your Attendance QR Code</h2>
      <p class="mb-4 text-gray-600">Scan with attendance system to register</p>

      <!-- Custom Image Instead of Auto QR -->
      <img 
        src="QRc.png" 
        alt="Attendance QR Code" 
        class="mx-auto w-48 h-48 mb-4 p-4 border-4 border-indigo-500 rounded-xl shadow-lg"
      />

      <!-- Logout Button (replaced Generate New Code) -->
      <button
        id="logoutBtn"
        class="mt-4 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"
      >
        Logout
      </button>
    </div>
  </div>

  <script>
    // Simulated current user (replace with real login logic)
    let currentUser = { id: "S001", name: "John Doe" };

    // Logout function
    const logoutBtn = document.getElementById("logoutBtn");
    logoutBtn.addEventListener("click", () => {
      currentUser = null;
      alert("You have been logged out.");
      window.location.href = 'index.html';  // change if needed
    });
  </script>
</body>
</html>
